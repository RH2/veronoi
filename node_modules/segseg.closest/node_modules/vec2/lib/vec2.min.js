(function(a){function b(a,c){return this instanceof b?(this.set(a||0,c||0),void 0):new b(a,c)}b.prototype={x:0,y:0,change:function(a){if(a)this.observers?this.observers.push(a):this.observers=[a];else if(this.observers)for(var b=this.observers.length-1;b>=0;b--)this.observers[b](this);return this},ignore:function(a){return this.observers=this.observers.filter(function(b){return b!==a}),this},dirty:function(){for(var a=["__cachedLength","__cachedLengthSquared"],b=0,c=a.length;c>b;b++)this[a[b]]=null},set:function(a,b){return this.x=a,this.y=b,this.dirty(),this.change()},zero:function(){return this.set(0,0)},clone:function(){return new b(this.x,this.y)},negate:function(a){return a?new b(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(a,c){return c?new b(this.x+a.x,this.y+a.y):(this.set(this.x+a.x,this.y+a.y),this)},subtract:function(a,c){return c?new b(this.x-a.x,this.y-a.y):(this.x-=a.x,this.y-=a.y,this)},multiply:function(c,d){var e,f;return c.x!==a?(e=c.x,f=c.y):e=f=c,d?new b(this.x*e,this.y*f):this.set(this.x*e,this.y*f)},rotate:function(a,c,d){var i,j,e=this.x,f=this.y,g=Math.cos(a),h=Math.sin(a);return c=c?-1:1,i=g*e-c*h*f,j=c*h*e+g*f,d?new b(i,j):this.set(i,j)},__cachedLength:null,length:function(){if(null===this.__cachedLength){var a=this.x,b=this.y;this.__cachedLength=Math.sqrt(a*a+b*b)}return this.__cachedLength},__cachedLengthSquared:null,lengthSquared:function(){if(null===this.__cachedLengthSquared){var a=this.x,b=this.y;this.__cachedLengthSquared=a*a+b*b}return this.__cachedLengthSquared},distance:function(a){return this.subtract(a,!0).length()},normalize:function(a){var c=this.length(),d=Number.MIN_VALUE>c?0:1/c;return a?new b(this.x*d,this.y*d):(this.set(this.x*d,this.y*d),this)},equal:function(b,c){return c===a?this.x===b.x&&this.y==b.y:this.x===b&&this.y===c},abs:function(a){var c=Math.abs(this.x),d=Math.abs(this.y);return a?new b(c,d):this.set(c,d)},min:function(a,c){var d=this.x,e=this.y,f=a.x,g=a.y,h=f>d?d:f,i=g>e?e:g;return c?new b(h,i):this.set(h,i)},max:function(a,c){var d=this.x,e=this.y,f=a.x,g=a.y,h=d>f?d:f,i=e>g?e:g;return c?new b(h,i):this.set(h,i)},clamp:function(a,b,c){var d=this.min(b,!0).max(a);return c?d:this.set(d.x,d.y)},isValid:function(){return isFinite(this.x)&&isFinite(this.y)&&!isNaN(this.x)&&!isNaN(this.y)},skew:function(){return new b(-this.y,this.x)},dot:function(a){return this.x*a.x+a.y*this.y},perpDot:function(a){return this.x*a.y-this.y*a.x},angleTo:function(a){return Math.atan2(this.perpDot(a),this.dot(a))},divide:function(a,c){if(0===a||isNaN(a))throw Error("division by zero");return c?new b(this.x/a,this.y/a):this.set(this.x/a,this.y/a)},toArray:function(){return[this.x,this.y]},fromArray:function(a){return this.set(a[0],a[1])}},"undefined"!=typeof module?module.exports=b:window.Vec2=b})();